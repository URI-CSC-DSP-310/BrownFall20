
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Class 8: Visualization and Starting to Clean Data &#8212; Programming for Data Science at URI Fall 2020</title>
    
  <link rel="stylesheet" href="../_static/css/index.73d71520a4ca3b99cfee5594769eaaae.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.3da636dd464baa7582d2.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Class 9: Preparing Data For Analysis" href="2020-09-28.html" />
    <link rel="prev" title="Class 7: Visualization for EDA" href="2020-09-23.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/logo.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Programming for Data Science at URI Fall 2020</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Welcome to Programming for Data Science
  </a>
 </li>
</ul>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../syllabus/index.html">
   Syllabus
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../syllabus/about-course.html">
     About
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../syllabus/tools.html">
     Tools and Resources
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../syllabus/grading.html">
     Grading
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../syllabus/course_map.html">
     Learning Objective, Schedule, and Rubric
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../syllabus/uri_resources.html">
     Support
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../syllabus/uri_statements.html">
     Policies
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 current active collapsible-parent">
  <a class="reference internal" href="index.html">
   Class Notes
  </a>
  <ul class="current collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-11.html">
     Class 2: intro to notebooks and python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-14.html">
     Class 3: Welcome to Week 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-16.html">
     Class 4: Pandas
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-18.html">
     Class 5: Accessing Data, continued
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-21.html">
     Class 6: Exploratory Data Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-23.html">
     Class 7: Visualization for EDA
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Class 8: Visualization and Starting to Clean Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-28.html">
     Class 9: Preparing Data For Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-09-30.html">
     Class 10: Cleaning review and Ray Summit Keynotes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-02.html">
     Class 11: Cleaning Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-05.html">
     Class 12: Constructing Datasets from Multiple Sources
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-07.html">
     Class 13: Data from multiple sources and Databases
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-12.html">
     Class 15: Intro to ML &amp; Modeling
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-14.html">
     Class 16: Naive Bayes Classification
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-16.html">
     Class 17: Evaluating Classification and Midsemester Feedback
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-19.html">
     Class 18: Mid Semester Checkin, Git, &amp; How GNB makes decisions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-21.html">
     Class 19: Decision Trees
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-23.html">
     Class 20: Decision Trees and Cross Validation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-26.html">
     Class 21: Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-28.html">
     Class 22: More Regression, More Evaluation and LASSO
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-10-30.html">
     Class 23: Interpretting Regression Evaluations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-02.html">
     Class 24: Clustering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-04.html">
     Class 25: Evaluating Clustering
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-06.html">
     Class 26: More Clustering Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-09.html">
     Class 27: Model Optimization- Choosing K
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-13.html">
     Class 28: SVM &amp; Model Optimization
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-16.html">
     Class 29: Choosing a Model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-18.html">
     Class 30: Learning Curves, Validation Curves
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-20.html">
     Class 31: Confidence Intervals
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="2020-11-23.html">
     Class 31: Intro to NLP
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../assignments/index.html">
   Assignments
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/01-python-syllabus.html">
     Assignment 1: Portfolio Setup, Data Science, and Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/02-python-access.html">
     Assignment 2: Practicing Python and Accessing Data
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/03-exploratory.html">
     Assignment 3: Exploratory Data Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/04-prepare.html">
     Assignment 4: Preparing Data for Analysis
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/05-construct.html">
     Assignment 5: Constructing Datasets and Using Databases
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/06-naive-bayes.html">
     Assignment 6: Naive Bayes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/07-decision-tree.html">
     Assignment 7: Decision Trees
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/08-regression.html">
     Assignment 8: Linear Regression
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/09-clustering.html">
     Assignment 9
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/10-optimization.html">
     Assignment 10: Optimizing Models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/11-model-selection.html">
     Assignment 11: Model Comparison
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../assignments/12-fake-news.html">
     Assignment 12: Fake News
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../portfolio/index.html">
   Portfolio
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../portfolio/formatting.html">
     Formatting Tips
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../portfolio/reflective.html">
     Reflective Prompts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../portfolio/analyses.html">
     Analysis Prompts
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../faq/index.html">
   FAQ
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../faq/syllabus.html">
     Syllabus FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../faq/github.html">
     GitHub FAQ
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../faq/debugging.html">
     Common Debugging Issues
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../resources/index.html">
   Resources
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../resources/tips.html">
     General Tips and Resources
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../resources/python.html">
     References on Python
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../resources/datasets.html">
     Data Sources
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        <a class="dropdown-buttons"
            href="../_sources/notes/2020-09-25.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download notebook file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/notes/2020-09-25.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        
        <a class="issues-button"
            href="https://github.com/rhodyprog4ds/BrownFall20//issues/new?title=Issue%20on%20page%20%2Fnotes/2020-09-25.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/rhodyprog4ds/BrownFall20/edit/main/notes/2020-09-25.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/rhodyprog4ds/BrownFall20/main?urlpath=tree/notes/2020-09-25.md"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#announcements">
   Announcements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#setup">
   Setup
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#warmup-activity">
   Warmup Activity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#what-about-the-rest-of-the-columns">
   What about the rest of the columns?
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#using-dummy-variables">
   Using Dummy Variables
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#cleaning-one-cell-of-data">
   Cleaning One Cell of Data
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#applying-this-to-the-rest-of-the-data">
   Applying this to the rest of the data
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="class-8-visualization-and-starting-to-clean-data">
<h1>Class 8: Visualization and Starting to Clean Data<a class="headerlink" href="#class-8-visualization-and-starting-to-clean-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="announcements">
<h2>Announcements<a class="headerlink" href="#announcements" title="Permalink to this headline">¶</a></h2>
<ol class="simple">
<li><p>closing notebooks</p>
<ul class="simple">
<li><p>recall that they don’t stop when you close the tabs</p></li>
<li><p>you need to stop it at the terminal it launched from</p></li>
<li><p>with: ctr + c as it says when you first <a class="reference external" href="https://jupyter.readthedocs.io/en/latest/running.html#starting-the-notebook-server">launch a notebook</a></p></li>
</ul>
</li>
<li><p>restart and rerun notebooks</p>
<ul class="simple">
<li><p>notebooks are a continuous REPL as long as you have it open</p></li>
<li><p>if you change code, you could have, for example a variable that is no longer defined in the notebook as written, but that still exists in memory, so code that depends on it will still run, for now, but not after you restart next (eg if we run it while grading)</p></li>
<li><p>to check, <a class="reference external" href="https://jupyter-notebook.readthedocs.io/en/stable/examples/Notebook/Running%20Code.html#Restarting-the-kernels">restart and rerun</a> your notebook</p></li>
</ul>
</li>
<li><p>say hello on zoom for attendance</p></li>
</ol>
</div>
<div class="section" id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this headline">¶</a></h2>
<p>First we <code class="docutils literal notranslate"><span class="pre">import</span></code> packages and load data as normal.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>

<span class="n">data_url</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/brownsarahm/python-socialsci-files/master/data/SAFI_full_shortname.csv&#39;</span>
<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">font_scale</span><span class="o">=</span><span class="mf">1.25</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>I’ve added one new command here, Seaborn’s []<code class="docutils literal notranslate"><span class="pre">set</span></code> function](https://seaborn.pydata.org/generated/seaborn.set.html). It sets a bunch of theme aspects for plotting, here I used it to increase the font size.</p>
</div>
<div class="section" id="warmup-activity">
<h2>Warmup Activity<a class="headerlink" href="#warmup-activity" title="Permalink to this headline">¶</a></h2>
<p>How recreate this plot?</p>
<p><img alt="image to copy" src="https://github.com/rhodyprog4ds/BrownFall20/blob/main/img/class8.png?raw=true" /></p>
<p>First, load the data</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_url</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>This is a <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.displot.html#seaborn.displot"><code class="docutils literal notranslate"><span class="pre">displot</span></code></a>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">safi_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;members_count&#39;</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="s1">&#39;parents_liv&#39;</span><span class="p">,</span>
            <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;sp_parents_liv&#39;</span><span class="p">,</span><span class="n">hue</span><span class="o">=</span><span class="s1">&#39;village&#39;</span><span class="p">,</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;kde&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x7fa5e9c3d450&gt;
</pre></div>
</div>
<img alt="../_images/2020-09-25_7_1.png" src="../_images/2020-09-25_7_1.png" />
</div>
</div>
<p>This allows comparisons of how the village, respondent’s parents living (<code class="docutils literal notranslate"><span class="pre">parents_liv</span></code>), and the spouse’s (<code class="docutils literal notranslate"><span class="pre">sp_parents_liv</span></code>) influence the number of members of the household (<code class="docutils literal notranslate"><span class="pre">members_count</span></code>). The <code class="docutils literal notranslate"><span class="pre">kind='kde'</span></code> parameter uses the underlying <a class="reference external" href="https://seaborn.pydata.org/generated/seaborn.kdeplot.html#seaborn.kdeplot"><code class="docutils literal notranslate"><span class="pre">kdeplot</span></code></a> to apply <a class="reference external" href="https://en.wikipedia.org/wiki/Kernel_density_estimation">kernel density estimation</a></p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>This is a general strategy. Testing out parameters with different values is a valuable way to learn what they do, and to build intuition about what they do.  The documentation also has demos of a lot of values.</p>
</div>
</div>
<p>We can understand better what this does, by comparing what happens when we take it out.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sns</span><span class="o">.</span><span class="n">displot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">safi_df</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;members_count&#39;</span><span class="p">,</span><span class="n">row</span><span class="o">=</span><span class="s1">&#39;parents_liv&#39;</span><span class="p">,</span>
            <span class="n">col</span> <span class="o">=</span> <span class="s1">&#39;sp_parents_liv&#39;</span><span class="p">,</span><span class="n">hue</span><span class="o">=</span><span class="s1">&#39;village&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;seaborn.axisgrid.FacetGrid at 0x7fa5e4590610&gt;
</pre></div>
</div>
<img alt="../_images/2020-09-25_9_1.png" src="../_images/2020-09-25_9_1.png" />
</div>
</div>
</div>
<div class="section" id="what-about-the-rest-of-the-columns">
<h2>What about the rest of the columns?<a class="headerlink" href="#what-about-the-rest-of-the-columns" title="Permalink to this headline">¶</a></h2>
<p>We’ve used this SAFI dataset a lot, but we’ve only used a few of the many columns.  Let’s look at all of them.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df</span><span class="o">.</span><span class="n">columns</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Index([&#39;key_id&#39;, &#39;interview_date&#39;, &#39;quest_no&#39;, &#39;start&#39;, &#39;end&#39;, &#39;province&#39;,
       &#39;district&#39;, &#39;ward&#39;, &#39;village&#39;, &#39;years_farm&#39;, &#39;agr_assoc&#39;, &#39;note2&#39;,
       &#39;no_membrs&#39;, &#39;members_count&#39;, &#39;remittance_money&#39;, &#39;years_liv&#39;,
       &#39;parents_liv&#39;, &#39;sp_parents_liv&#39;, &#39;grand_liv&#39;, &#39;sp_grand_liv&#39;,
       &#39;respondent_roof_type&#39;, &#39;respondent_wall_type&#39;,
       &#39;respondent_wall_type_other&#39;, &#39;respondent_floor_type&#39;, &#39;window_type&#39;,
       &#39;buildings_in_compound&#39;, &#39;rooms&#39;, &#39;other_buildings&#39;, &#39;no_plots&#39;,
       &#39;plots_count&#39;, &#39;water_use&#39;, &#39;no_group_count&#39;, &#39;yes_group_count&#39;,
       &#39;no_enough_water&#39;, &#39;months_no_water&#39;, &#39;period_use&#39;, &#39;exper_other&#39;,
       &#39;other_meth&#39;, &#39;res_change&#39;, &#39;memb_assoc&#39;, &#39;resp_assoc&#39;, &#39;fees_water&#39;,
       &#39;affect_conflicts&#39;, &#39;note&#39;, &#39;need_money&#39;, &#39;money_source&#39;,
       &#39;money_source_other&#39;, &#39;crops_contr&#39;, &#39;emply_lab&#39;, &#39;du_labour&#39;,
       &#39;liv_owned&#39;, &#39;liv_owned_other&#39;, &#39;liv_count&#39;, &#39;poultry&#39;,
       &#39;du_look_aftr_cows&#39;, &#39;items_owned&#39;, &#39;items_owned_other&#39;, &#39;no_meals&#39;,
       &#39;months_lack_food&#39;, &#39;no_food_mitigation&#39;, &#39;gps_Latitude&#39;,
       &#39;gps_Longitude&#39;, &#39;gps_Altitude&#39;, &#39;gps_Accuracy&#39;, &#39;instanceID&#39;],
      dtype=&#39;object&#39;)
</pre></div>
</div>
</div>
</div>
<p>We can look at the first few row to recall what sort of data are available in each column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>key_id</th>
      <th>interview_date</th>
      <th>quest_no</th>
      <th>start</th>
      <th>end</th>
      <th>province</th>
      <th>district</th>
      <th>ward</th>
      <th>village</th>
      <th>years_farm</th>
      <th>...</th>
      <th>items_owned</th>
      <th>items_owned_other</th>
      <th>no_meals</th>
      <th>months_lack_food</th>
      <th>no_food_mitigation</th>
      <th>gps_Latitude</th>
      <th>gps_Longitude</th>
      <th>gps_Altitude</th>
      <th>gps_Accuracy</th>
      <th>instanceID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>17 November 2016</td>
      <td>1</td>
      <td>2017-03-23T09:49:57.000Z</td>
      <td>2017-04-02T17:29:08.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>God</td>
      <td>11</td>
      <td>...</td>
      <td>['bicycle' ;  'television' ;  'solar_panel' ; ...</td>
      <td>NaN</td>
      <td>2</td>
      <td>['Jan']</td>
      <td>['na' ;  'rely_less_food' ;  'reduce_meals' ; ...</td>
      <td>-19.112259</td>
      <td>33.483456</td>
      <td>698</td>
      <td>14.0</td>
      <td>uuid:ec241f2c-0609-46ed-b5e8-fe575f6cefef</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>17 November 2016</td>
      <td>1</td>
      <td>2017-04-02T09:48:16.000Z</td>
      <td>2017-04-02T17:26:19.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>God</td>
      <td>2</td>
      <td>...</td>
      <td>['cow_cart' ;  'bicycle' ;  'radio' ;  'cow_pl...</td>
      <td>NaN</td>
      <td>2</td>
      <td>['Jan' ;  'Sept' ;  'Oct' ;  'Nov' ;  'Dec']</td>
      <td>['na' ;  'reduce_meals' ;  'restrict_adults' ;...</td>
      <td>-19.112477</td>
      <td>33.483416</td>
      <td>690</td>
      <td>19.0</td>
      <td>uuid:099de9c9-3e5e-427b-8452-26250e840d6e</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>17 November 2016</td>
      <td>3</td>
      <td>2017-04-02T14:35:26.000Z</td>
      <td>2017-04-02T17:26:53.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>God</td>
      <td>40</td>
      <td>...</td>
      <td>['solar_torch']</td>
      <td>NaN</td>
      <td>2</td>
      <td>['Jan' ;  'Feb' ;  'Mar' ;  'Oct' ;  'Nov' ;  ...</td>
      <td>['na' ;  'restrict_adults' ;  'lab_ex_food']</td>
      <td>-19.112108</td>
      <td>33.483450</td>
      <td>674</td>
      <td>13.0</td>
      <td>uuid:193d7daf-9582-409b-bf09-027dd36f9007</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>17 November 2016</td>
      <td>4</td>
      <td>2017-04-02T14:55:18.000Z</td>
      <td>2017-04-02T17:27:16.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>God</td>
      <td>6</td>
      <td>...</td>
      <td>['bicycle' ;  'radio' ;  'cow_plough' ;  'sola...</td>
      <td>NaN</td>
      <td>2</td>
      <td>['Sept' ;  'Oct' ;  'Nov' ;  'Dec']</td>
      <td>['na' ;  'reduce_meals' ;  'restrict_adults' ;...</td>
      <td>-19.112229</td>
      <td>33.483424</td>
      <td>679</td>
      <td>5.0</td>
      <td>uuid:148d1105-778a-4755-aa71-281eadd4a973</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>17 November 2016</td>
      <td>5</td>
      <td>2017-04-02T15:10:35.000Z</td>
      <td>2017-04-02T17:27:35.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>God</td>
      <td>18</td>
      <td>...</td>
      <td>['motorcyle' ;  'radio' ;  'cow_plough' ;  'mo...</td>
      <td>NaN</td>
      <td>2</td>
      <td>['Aug' ;  'Sept' ;  'Oct' ;  'Nov']</td>
      <td>['na' ;  'go_forest' ;  'migrate']</td>
      <td>-19.112217</td>
      <td>33.483425</td>
      <td>689</td>
      <td>10.0</td>
      <td>uuid:2c867811-9696-4966-9866-f35c3e97d02d</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 65 columns</p>
</div></div></div>
</div>
<p>It might be interesting to use the <code class="docutils literal notranslate"><span class="pre">items_owned</span></code> column to compare find out if there are differences between farms based on what items they have.</p>
<p>Maybe we’d want to see how many farms own each item, maybe we want to know how many farms own bicycle. Let’s try <code class="docutils literal notranslate"><span class="pre">value_counts</span></code> out like we used before.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;mobile_phone&#39;]                                                                                                            4
[&#39;radio&#39;]                                                                                                                   4
[&#39;bicycle&#39; ;  &#39;radio&#39; ;  &#39;mobile_phone&#39;]                                                                                    3
[&#39;bicycle&#39; ;  &#39;radio&#39; ;  &#39;cow_plough&#39; ;  &#39;solar_panel&#39; ;  &#39;table&#39; ;  &#39;mobile_phone&#39;]                                        3
[&#39;bicycle&#39; ;  &#39;radio&#39; ;  &#39;cow_plough&#39; ;  &#39;solar_panel&#39; ;  &#39;solar_torch&#39; ;  &#39;mobile_phone&#39;]                                  3
                                                                                                                           ..
[&#39;cow_cart&#39; ;  &#39;bicycle&#39; ;  &#39;radio&#39; ;  &#39;cow_plough&#39; ;  &#39;solar_panel&#39; ;  &#39;solar_torch&#39;]                                      1
[&#39;cow_cart&#39; ;  &#39;bicycle&#39; ;  &#39;radio&#39; ;  &#39;cow_plough&#39; ;  &#39;solar_torch&#39;]                                                       1
[&#39;cow_cart&#39; ;  &#39;bicycle&#39; ;  &#39;television&#39; ;  &#39;radio&#39; ;  &#39;cow_plough&#39; ;  &#39;solar_panel&#39; ;  &#39;electricity&#39; ;  &#39;mobile_phone&#39;]    1
[&#39;motorcyle&#39; ;  &#39;cow_plough&#39;]                                                                                               1
[&#39;cow_cart&#39; ;  &#39;motorcyle&#39; ;  &#39;television&#39; ;  &#39;radio&#39; ;  &#39;cow_plough&#39; ;  &#39;solar_torch&#39; ;  &#39;table&#39; ;  &#39;mobile_phone&#39;]        1
Name: items_owned, Length: 95, dtype: int64
</pre></div>
</div>
</div>
</div>
<p>The problem is this gives the count of each <em>list</em> of items instead of each item.  What we’d want instead is one column for each item, where the values in the column are 1 when the farm owns that item and 0 when they don’t. This representation is sometimes called 1 hot encoding and other times (including in pandas) it’s called dummy variables.</p>
</div>
<div class="section" id="using-dummy-variables">
<h2>Using Dummy Variables<a class="headerlink" href="#using-dummy-variables" title="Permalink to this headline">¶</a></h2>
<p>Let’s try this function out, first on the <code class="docutils literal notranslate"><span class="pre">village</span></code> column.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">data</span><span class="o">=</span> <span class="n">safi_df</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;village&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>key_id</th>
      <th>interview_date</th>
      <th>quest_no</th>
      <th>start</th>
      <th>end</th>
      <th>province</th>
      <th>district</th>
      <th>ward</th>
      <th>years_farm</th>
      <th>agr_assoc</th>
      <th>...</th>
      <th>months_lack_food</th>
      <th>no_food_mitigation</th>
      <th>gps_Latitude</th>
      <th>gps_Longitude</th>
      <th>gps_Altitude</th>
      <th>gps_Accuracy</th>
      <th>instanceID</th>
      <th>village_Chirodzo</th>
      <th>village_God</th>
      <th>village_Ruaca</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>17 November 2016</td>
      <td>1</td>
      <td>2017-03-23T09:49:57.000Z</td>
      <td>2017-04-02T17:29:08.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>11</td>
      <td>no</td>
      <td>...</td>
      <td>['Jan']</td>
      <td>['na' ;  'rely_less_food' ;  'reduce_meals' ; ...</td>
      <td>-19.112259</td>
      <td>33.483456</td>
      <td>698</td>
      <td>14.0</td>
      <td>uuid:ec241f2c-0609-46ed-b5e8-fe575f6cefef</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>17 November 2016</td>
      <td>1</td>
      <td>2017-04-02T09:48:16.000Z</td>
      <td>2017-04-02T17:26:19.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>2</td>
      <td>yes</td>
      <td>...</td>
      <td>['Jan' ;  'Sept' ;  'Oct' ;  'Nov' ;  'Dec']</td>
      <td>['na' ;  'reduce_meals' ;  'restrict_adults' ;...</td>
      <td>-19.112477</td>
      <td>33.483416</td>
      <td>690</td>
      <td>19.0</td>
      <td>uuid:099de9c9-3e5e-427b-8452-26250e840d6e</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>17 November 2016</td>
      <td>3</td>
      <td>2017-04-02T14:35:26.000Z</td>
      <td>2017-04-02T17:26:53.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>40</td>
      <td>no</td>
      <td>...</td>
      <td>['Jan' ;  'Feb' ;  'Mar' ;  'Oct' ;  'Nov' ;  ...</td>
      <td>['na' ;  'restrict_adults' ;  'lab_ex_food']</td>
      <td>-19.112108</td>
      <td>33.483450</td>
      <td>674</td>
      <td>13.0</td>
      <td>uuid:193d7daf-9582-409b-bf09-027dd36f9007</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>17 November 2016</td>
      <td>4</td>
      <td>2017-04-02T14:55:18.000Z</td>
      <td>2017-04-02T17:27:16.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>6</td>
      <td>no</td>
      <td>...</td>
      <td>['Sept' ;  'Oct' ;  'Nov' ;  'Dec']</td>
      <td>['na' ;  'reduce_meals' ;  'restrict_adults' ;...</td>
      <td>-19.112229</td>
      <td>33.483424</td>
      <td>679</td>
      <td>5.0</td>
      <td>uuid:148d1105-778a-4755-aa71-281eadd4a973</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>17 November 2016</td>
      <td>5</td>
      <td>2017-04-02T15:10:35.000Z</td>
      <td>2017-04-02T17:27:35.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>18</td>
      <td>no</td>
      <td>...</td>
      <td>['Aug' ;  'Sept' ;  'Oct' ;  'Nov']</td>
      <td>['na' ;  'go_forest' ;  'migrate']</td>
      <td>-19.112217</td>
      <td>33.483425</td>
      <td>689</td>
      <td>10.0</td>
      <td>uuid:2c867811-9696-4966-9866-f35c3e97d02d</td>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>126</th>
      <td>127</td>
      <td>18 May 2017</td>
      <td>126</td>
      <td>2017-05-18T04:13:37.000Z</td>
      <td>2017-05-18T04:35:47.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>5</td>
      <td>yes</td>
      <td>...</td>
      <td>['Oct' ;  'Nov' ;  'Dec']</td>
      <td>['rely_less_food' ;  'lab_ex_food']</td>
      <td>-19.112194</td>
      <td>33.483379</td>
      <td>700</td>
      <td>7.0</td>
      <td>uuid:69caea81-a4e5-4e8d-83cd-9c18d8e8d965</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>127</th>
      <td>128</td>
      <td>04 June 2017</td>
      <td>193</td>
      <td>2017-06-04T09:36:20.000Z</td>
      <td>2017-06-04T10:13:32.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>10</td>
      <td>no</td>
      <td>...</td>
      <td>['none']</td>
      <td>['na']</td>
      <td>-19.112157</td>
      <td>33.483390</td>
      <td>720</td>
      <td>9.0</td>
      <td>uuid:5ccc2e5a-ea90-48b5-8542-69400d5334df</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>128</th>
      <td>129</td>
      <td>04 June 2017</td>
      <td>194</td>
      <td>2017-06-04T10:13:36.000Z</td>
      <td>2017-06-04T10:32:06.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>5</td>
      <td>no</td>
      <td>...</td>
      <td>['Sept' ;  'Oct' ;  'Nov']</td>
      <td>['lab_ex_food']</td>
      <td>-19.112271</td>
      <td>33.483471</td>
      <td>719</td>
      <td>10.0</td>
      <td>uuid:95c11a30-d44f-40c4-8ea8-ec34fca6bbbf</td>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>129</th>
      <td>130</td>
      <td>04 June 2017</td>
      <td>199</td>
      <td>2017-06-04T10:33:55.000Z</td>
      <td>2017-06-04T10:52:22.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>17</td>
      <td>yes</td>
      <td>...</td>
      <td>['Nov' ;  'Dec']</td>
      <td>['rely_less_food' ;  'limit_variety' ;  'reduc...</td>
      <td>-19.112278</td>
      <td>33.483390</td>
      <td>711</td>
      <td>5.0</td>
      <td>uuid:ffc83162-ff24-4a87-8709-eff17abc0b3b</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>130</th>
      <td>131</td>
      <td>04 June 2017</td>
      <td>200</td>
      <td>2017-06-04T10:52:46.000Z</td>
      <td>2017-06-04T11:08:13.000Z</td>
      <td>Manica</td>
      <td>Manica</td>
      <td>Bandula</td>
      <td>20</td>
      <td>yes</td>
      <td>...</td>
      <td>['Oct' ;  'Nov']</td>
      <td>['rely_less_food' ;  'restrict_adults' ;  'bor...</td>
      <td>-19.112183</td>
      <td>33.483372</td>
      <td>681</td>
      <td>20.0</td>
      <td>uuid:aa77a0d7-7142-41c8-b494-483a5b68d8a7</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>131 rows × 67 columns</p>
</div></div></div>
</div>
<p>Instead of scrolling, we can isolate the new columns we just created.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df_villages</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">data</span><span class="o">=</span> <span class="n">safi_df</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;village&#39;</span><span class="p">])</span>
<span class="n">keep_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">safi_df_villages</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;village_&#39;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
<span class="n">safi_df_villages</span><span class="p">[</span><span class="n">keep_cols</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>village_Chirodzo</th>
      <th>village_God</th>
      <th>village_Ruaca</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>126</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>127</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>128</th>
      <td>0</td>
      <td>0</td>
      <td>1</td>
    </tr>
    <tr>
      <th>129</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>130</th>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>131 rows × 3 columns</p>
</div></div></div>
</div>
<p>Note that now we have 3 columns, one for each village. This column was already usable, but it was well formatted an useful to illustrate what <code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> does.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>try this out and compare the two, test out <code class="docutils literal notranslate"><span class="pre">get_dummies</span></code> on another column to be sure you know what it does.</p>
</div>
<p>Now, we can try it on <code class="docutils literal notranslate"><span class="pre">items_owned</span></code>.
_this time we’ll filter the columns for display and inspection right away</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df_items</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">data</span><span class="o">=</span> <span class="n">safi_df</span><span class="p">,</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">])</span>
<span class="n">keep_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">safi_df_items</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;village_&#39;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
<span class="n">safi_df_items</span><span class="p">[</span><span class="n">keep_cols</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
    </tr>
    <tr>
      <th>1</th>
    </tr>
    <tr>
      <th>2</th>
    </tr>
    <tr>
      <th>3</th>
    </tr>
    <tr>
      <th>4</th>
    </tr>
    <tr>
      <th>...</th>
    </tr>
    <tr>
      <th>126</th>
    </tr>
    <tr>
      <th>127</th>
    </tr>
    <tr>
      <th>128</th>
    </tr>
    <tr>
      <th>129</th>
    </tr>
    <tr>
      <th>130</th>
    </tr>
  </tbody>
</table>
<p>131 rows × 0 columns</p>
</div></div></div>
</div>
<p>This still isn’t quite what we want, because each value in the <code class="docutils literal notranslate"><span class="pre">items_owned</span></code> column <em>looks</em> like a list but it’s actually a string, we can check that with the <code class="docutils literal notranslate"><span class="pre">type</span></code> function.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">safi_df</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>str
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="cleaning-one-cell-of-data">
<h2>Cleaning One Cell of Data<a class="headerlink" href="#cleaning-one-cell-of-data" title="Permalink to this headline">¶</a></h2>
<p>So, let’s clean the value from one cell of that column and see what else is going on. First, we save it to a variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">farm1_items</span> <span class="o">=</span> <span class="n">safi_df</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Let’s look at it first.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">farm1_items</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&quot;[&#39;bicycle&#39; ;  &#39;television&#39; ;  &#39;solar_panel&#39; ;  &#39;table&#39;]&quot;
</pre></div>
</div>
</div>
</div>
<p>We could try first casting it to a list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">list</span><span class="p">(</span><span class="n">farm1_items</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;[&#39;,
 &quot;&#39;&quot;,
 &#39;b&#39;,
 &#39;i&#39;,
 &#39;c&#39;,
 &#39;y&#39;,
 &#39;c&#39;,
 &#39;l&#39;,
 &#39;e&#39;,
 &quot;&#39;&quot;,
 &#39; &#39;,
 &#39;;&#39;,
 &#39; &#39;,
 &#39; &#39;,
 &quot;&#39;&quot;,
 &#39;t&#39;,
 &#39;e&#39;,
 &#39;l&#39;,
 &#39;e&#39;,
 &#39;v&#39;,
 &#39;i&#39;,
 &#39;s&#39;,
 &#39;i&#39;,
 &#39;o&#39;,
 &#39;n&#39;,
 &quot;&#39;&quot;,
 &#39; &#39;,
 &#39;;&#39;,
 &#39; &#39;,
 &#39; &#39;,
 &quot;&#39;&quot;,
 &#39;s&#39;,
 &#39;o&#39;,
 &#39;l&#39;,
 &#39;a&#39;,
 &#39;r&#39;,
 &#39;_&#39;,
 &#39;p&#39;,
 &#39;a&#39;,
 &#39;n&#39;,
 &#39;e&#39;,
 &#39;l&#39;,
 &quot;&#39;&quot;,
 &#39; &#39;,
 &#39;;&#39;,
 &#39; &#39;,
 &#39; &#39;,
 &quot;&#39;&quot;,
 &#39;t&#39;,
 &#39;a&#39;,
 &#39;b&#39;,
 &#39;l&#39;,
 &#39;e&#39;,
 &quot;&#39;&quot;,
 &#39;]&#39;]
</pre></div>
</div>
</div>
</div>
<p>That doesn’t quite do it though, let’s try separating it with the split method at the ‘;’.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">farm1_items</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&quot;[&#39;bicycle&#39; &quot;, &quot;  &#39;television&#39; &quot;, &quot;  &#39;solar_panel&#39; &quot;, &quot;  &#39;table&#39;]&quot;]
</pre></div>
</div>
</div>
</div>
<p>This still has some extra characters, in it though. We should remove those, probably before we do the split so that we don’t end up with empty items in the list.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">farm1_items</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;bicycle ;  television ;  solar_panel ;  table&#39;
</pre></div>
</div>
</div>
</div>
<p>That is now ready to split.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">farm1_items</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;bicycle &#39;, &#39;  television &#39;, &#39;  solar_panel &#39;, &#39;  table&#39;]
</pre></div>
</div>
</div>
</div>
<p>There are some empty spaces lest.  Python has a string function <code class="docutils literal notranslate"><span class="pre">strip</span></code> that removes leading and trailing (on the ends) whitespace (spaces, tabs, new lines), we have to apply it to each individual item of that list above. We can use a list comprehension for this.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="n">farm1_items</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&#39;bicycle&#39;, &#39;television&#39;, &#39;solar_panel&#39;, &#39;table&#39;]
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="applying-this-to-the-rest-of-the-data">
<h2>Applying this to the rest of the data<a class="headerlink" href="#applying-this-to-the-rest-of-the-data" title="Permalink to this headline">¶</a></h2>
<p>We can put that in a function so that we can reuse it.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">separate_items</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    clean the items owned column of one row of the safi_df</span>
<span class="sd">    &#39;&#39;&#39;</span>

    <span class="k">return</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="n">row</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)]</span>
</pre></div>
</div>
</div>
</div>
<p>Pandas provides us special function to apply a function to a dataframe along a given axis.</p>
<div class="cell tag_raises-exception docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span> <span class="n">safi_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">separate_items</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">AttributeError</span><span class="g g-Whitespace">                            </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">20</span><span class="o">-</span><span class="mi">26</span><span class="n">c2d810f773</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">safi_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">separate_items</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/pandas/core/frame.py</span> in <span class="ni">apply</span><span class="nt">(self, func, axis, raw, result_type, args, **kwds)</span>
<span class="g g-Whitespace">   </span><span class="mi">7550</span>             <span class="n">kwds</span><span class="o">=</span><span class="n">kwds</span><span class="p">,</span>
<span class="g g-Whitespace">   </span><span class="mi">7551</span>         <span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">7552</span>         <span class="k">return</span> <span class="n">op</span><span class="o">.</span><span class="n">get_result</span><span class="p">()</span>
<span class="g g-Whitespace">   </span><span class="mi">7553</span> 
<span class="g g-Whitespace">   </span><span class="mi">7554</span>     <span class="k">def</span> <span class="nf">applymap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">func</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;DataFrame&quot;</span><span class="p">:</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/pandas/core/apply.py</span> in <span class="ni">get_result</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">178</span>             <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_raw</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">179</span> 
<span class="ne">--&gt; </span><span class="mi">180</span>         <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_standard</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">181</span> 
<span class="g g-Whitespace">    </span><span class="mi">182</span>     <span class="k">def</span> <span class="nf">apply_empty_result</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/pandas/core/apply.py</span> in <span class="ni">apply_standard</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">269</span> 
<span class="g g-Whitespace">    </span><span class="mi">270</span>     <span class="k">def</span> <span class="nf">apply_standard</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">271</span>         <span class="n">results</span><span class="p">,</span> <span class="n">res_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">apply_series_generator</span><span class="p">()</span>
<span class="g g-Whitespace">    </span><span class="mi">272</span> 
<span class="g g-Whitespace">    </span><span class="mi">273</span>         <span class="c1"># wrap results</span>

<span class="nn">/opt/hostedtoolcache/Python/3.7.9/x64/lib/python3.7/site-packages/pandas/core/apply.py</span> in <span class="ni">apply_series_generator</span><span class="nt">(self)</span>
<span class="g g-Whitespace">    </span><span class="mi">298</span>                 <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">series_gen</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">299</span>                     <span class="c1"># ignore SettingWithCopy here in case the user mutates</span>
<span class="ne">--&gt; </span><span class="mi">300</span>                     <span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">301</span>                     <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">ABCSeries</span><span class="p">):</span>
<span class="g g-Whitespace">    </span><span class="mi">302</span>                         <span class="c1"># If we have a view on v, we need to make a copy because</span>

<span class="nn">&lt;ipython-input-19-f7c175567037&gt;</span> in <span class="ni">separate_items</span><span class="nt">(row)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span>     <span class="s1">&#39;&#39;&#39;</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span><span class="s1"> </span>
<span class="ne">----&gt; </span><span class="mi">6</span><span class="s1">     return [i.strip() for i in  row[&#39;items_owned&#39;].replace(&#39;[&#39;,&#39;&#39;).replace(&#39;]&#39;,&#39;&#39;).replace(&quot;&#39;&quot;,&quot;&quot;).split(&#39;;&#39;)]</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span><span class="s1"> </span>

<span class="ne">AttributeError</span>: &#39;float&#39; object has no attribute &#39;replace&#39;
</pre></div>
</div>
</div>
</div>
<p>This error means that there are some elements of that column that is a float instead of a string. We should check what that might be. We can check with a list comprehension and look at the ones that are <code class="docutils literal notranslate"><span class="pre">float</span></code></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">item_list</span> <span class="k">for</span> <span class="n">item_list</span> <span class="ow">in</span> <span class="n">safi_df</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">item_list</span><span class="p">)</span><span class="o">==</span><span class="nb">float</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[nan, nan, nan, nan, nan, nan, nan, nan, nan, nan]
</pre></div>
</div>
</div>
</div>
<p>Since the floats are <code class="docutils literal notranslate"><span class="pre">nan</span></code>, we know that our function more or less is the right thing to do, but we need to modify our function to accommodate those values. We can replace them with an empty list.</p>
<div class="margin sidebar">
<p class="sidebar-title"></p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If this were a regular analysis and not a tutorial, we would probably just edit the cell above, but for the purpose of making this tutorial more readable, we’ll copy the function from above, into another cell, edit that cell, and overwrite in python memory by leaving it the same function name.</p>
<p>If instead we wanted to be able to compare the two functions, we’d give the second one a different name.</p>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">separate_items</span><span class="p">(</span><span class="n">row</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">])</span><span class="o">==</span><span class="nb">str</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">i</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span>  <span class="n">row</span><span class="p">[</span><span class="s1">&#39;items_owned&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;[&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;]&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span><span class="s2">&quot;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;;&#39;</span><span class="p">)]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[]</span>
</pre></div>
</div>
</div>
</div>
<p>We can try this again:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df</span><span class="p">[</span><span class="s1">&#39;items_owned_clean&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">safi_df</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">separate_items</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>it runs successfully and we can look at the  output.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">safi_df</span><span class="p">[[</span><span class="s1">&#39;items_owned_clean&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>items_owned_clean</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>[bicycle, television, solar_panel, table]</td>
    </tr>
    <tr>
      <th>1</th>
      <td>[cow_cart, bicycle, radio, cow_plough, solar_p...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>[solar_torch]</td>
    </tr>
    <tr>
      <th>3</th>
      <td>[bicycle, radio, cow_plough, solar_panel, mobi...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>[motorcyle, radio, cow_plough, mobile_phone]</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>This looks all good and we’ll pick up from here on Monday.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./notes"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="2020-09-23.html" title="previous page">Class 7: Visualization for EDA</a>
    <a class='right-next' id="next-link" href="2020-09-28.html" title="next page">Class 9: Preparing Data For Analysis</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Professor Sarah M Brown<br/>
        
            &copy; Copyright 2020.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.3da636dd464baa7582d2.js"></script>


    
  </body>
</html>